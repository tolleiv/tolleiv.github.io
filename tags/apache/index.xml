<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>blog.tolleiv.de ...  </title>
    <link>//blog.tolleiv.de/tags/apache/index.xml</link>
    <description>Recent content on blog.tolleiv.de ...  </description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <copyright>&amp;copy; &lt;a href=&#34;https://github.com/tolleiv&#34;&gt;tolleiv&lt;/a&gt; 2016 - &lt;a href=&#34;http://creativecommons.org/licenses/by-sa/3.0/&#34;&gt;CC BY-SA 3.0&lt;/a&gt; - Powered by Hugo</copyright>
    <atom:link href="//blog.tolleiv.de/tags/apache/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Debugging mod_rewrite... my favorite way</title>
      <link>//blog.tolleiv.de/2010/01/debugging-mod_rewrite...-my-favorite-way/</link>
      <pubDate>Sat, 23 Jan 2010 17:19:42 +0000</pubDate>
      
      <guid>//blog.tolleiv.de/2010/01/debugging-mod_rewrite...-my-favorite-way/</guid>
      <description>&lt;p&gt;Once a month someone is asking because he has issues to get his mod_rewrite rules to do what he want&amp;rsquo;s. Writing the rules and the required RegEx for these rules is quite easy, but Apache still behaves strange every now and then and that&amp;rsquo;s where one of my favorite ways to &amp;ldquo;debug&amp;rdquo; mod_rewrite comes in very handy. And I felt that writing something is better than having a silent blog ;)&lt;/p&gt;

&lt;p&gt;The following block is what it&amp;rsquo;s all about. It seems to have it&amp;rsquo;s origin on &lt;a href=&#34;http://www.webmasterworld.com/forum92/5360.htm&#34;&gt;WebmasterWorld&lt;/a&gt; and &lt;a href=&#34;http://www.latenightpc.com/blog/archives/2007/09/05/a-couple-ways-to-debug-mod_rewrite&#34;&gt;Rob Russel&amp;rsquo;s Blog&lt;/a&gt; and looks basically like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;RewriteCond %{QUERY_STRING} !vardump
RewriteRule (.*) http://www.example.com/$1?vardump&amp;amp;reqhost=%{HTTP_HOST} [R=301,L,QSA]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Pretty easy and quite nice. The first line just prevents recursion, so that you&amp;rsquo;ll be able to see the first redirect and nothing else. The second line is where you can place in every information you&amp;rsquo;d like to check. The [R=301,L,QSA] makes sure that you can debug without interruption. The &amp;ldquo;R=301&amp;rdquo; makes sure the browser doesn&amp;rsquo;t start a second request, but tells him that the location was changed, the &amp;ldquo;QSA&amp;rdquo; makes sure that the querystring isn&amp;rsquo;t lost and the &amp;ldquo;L&amp;rdquo; prevents that your server performs other redirection rules.&lt;/p&gt;

&lt;p&gt;As shown the first block already unveils some information and places it into the redirection URL, so you could use it to check what the value of HTTP_HOST is and you also know whether mod_rewrite works or not. This way you can debug every variable mod_rewrite offers and you can check environmental variables and results of the regular expressions.&lt;/p&gt;

&lt;p&gt;If you&amp;rsquo;d like to know whether a specific RewriteCond is working or not just place it in that block and you&amp;rsquo;ll see if it&amp;rsquo;s still redirecting or not, like this (&lt;a href=&#34;http://twitcode.org/Bb&#34;&gt;via&lt;/a&gt;):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;RewriteCond %{QUERY_STRING} !vardump
RewriteCond %{HTTP:Accept-Language} ^de.*$
RewriteRule (.*) http://www.example.com/$1?vardump&amp;amp;languageMatchedDE [R=301,L,QSA]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Checking a regular expression from an RewriteCond looks like this (used on a server with a pretty strange setup for %{DOCUMENT_ROOT}):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;RewriteCond %{QUERY_STRING} !vardump
RewriteCond %{REQUEST_FILENAME} ^(.*\/htdocs\/).*$
RewriteRule (.*) http://www.example.com/$1?vardump&amp;amp;reqfilename=%1 [R=301,L,QSA]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As you see that&amp;rsquo;s a pretty handy way to debug lot&amp;rsquo;s of mod_rewrite stuff, it helped me quite often and I hope it does the same for you :)&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>